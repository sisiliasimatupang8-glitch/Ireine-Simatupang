/**
 * IreneProfileApp â€” Single-file React template (App.jsx)
 * Tech: React + Tailwind CSS (primary) + optional Bootstrap CSS import (see README instructions)
 * Features included:
 *  - BrowserRouter with two pages: / (ProfilePage) and /materi (MateriPage)
 *  - Responsive Navbar (mobile menu), accessible Accordion, smooth transitions
 *  - Simple Gallery component (lightbox-like modal), responsive layout
 *  - Clean, componentized structure inside single file so you can split into files later
 *
 * Installation notes (brief):
 * 1) Create app: `npm create vite@latest irene-app --template react` or `npx create-react-app irene-app`
 * 2) Install deps: `npm i react-router-dom` (optionally `npm i framer-motion`)
 * 3) Tailwind: follow Tailwind docs -> install tailwind and add config (postcss)
 * 4) If you want Bootstrap utilities, add to `index.html` or `src/main.jsx`: import 'bootstrap/dist/css/bootstrap.min.css'
 *
 * After that, replace `src/App.jsx` with this file and run `npm run dev` or `npm start`.
 */

import React, { useState } from 'react';
import { BrowserRouter, Routes, Route, Link, NavLink, useLocation } from 'react-router-dom';

// SAMPLE IMAGES: Replace with your own images in /public or import them.
const SAMPLE_GALLERY = [
  '/images/plant1.jpg',
  '/images/plant2.jpg',
  '/images/plant3.jpg',
  '/images/plant4.jpg',
  '/images/plant5.jpg',
];

function App() {
  return (
    <BrowserRouter>
      <MainLayout>
        <AnimatedRoutes />
      </MainLayout>
    </BrowserRouter>
  );
}

function MainLayout({ children }) {
  return (
    <div className="min-h-screen bg-[url('https://images.unsplash.com/photo-1501004318641-b39e6451bec6?auto=format&fit=crop&w=1400&q=80')] bg-cover bg-center">
      <div className="backdrop-filter backdrop-blur-sm bg-black/40 min-h-screen">
        <Navbar />
        <div className="container mx-auto px-4 py-8">{children}</div>
        <footer className="text-center text-sm text-emerald-200/90 py-6">Materi disusun oleh: IRENE C SIMATUPANG â€¢ ROGER LASUT â€¢ KARENINA SEPANG â€¢ GRENDLY UMBOH â€¢ FACHREIZY E P BATALIPU</footer>
      </div>
    </div>
  );
}

function AnimatedRoutes() {
  const location = useLocation();
  return (
    // simple route switch; you can add framer-motion for fancy page transitions
    <Routes location={location} key={location.pathname}>
      <Route path="/" element={<ProfilePage />} />
      <Route path="/materi" element={<MateriPage />} />
      <Route path="*" element={<NotFound />} />
    </Routes>
  );
}

function Navbar() {
  const [open, setOpen] = useState(false);
  return (
    <nav className="bg-gradient-to-r from-emerald-900/60 to-emerald-800/35 border-b border-emerald-700/30">
      <div className="container mx-auto px-4 py-4 flex items-center justify-between">
        <Link to="/" className="flex items-center gap-3">
          <div className="w-10 h-10 rounded-lg bg-emerald-400/10 flex items-center justify-center text-emerald-200 shadow-sm">ðŸŒ±</div>
          <div>
            <div className="text-white font-semibold">Irene C. Simatupang</div>
            <div className="text-emerald-200 text-xs">Agroteknologi â€¢ Hortikultura</div>
          </div>
        </Link>

        <div className="hidden md:flex items-center gap-4">
          <NavLink to="/" className={({isActive})=> `px-3 py-2 rounded-md text-sm font-medium ${isActive? 'bg-emerald-600/80 text-white':'text-emerald-100/90 hover:bg-emerald-600/40'}`} end>Profil</NavLink>
          <NavLink to="/materi" className={({isActive})=> `px-3 py-2 rounded-md text-sm font-medium ${isActive? 'bg-emerald-600/80 text-white':'text-emerald-100/90 hover:bg-emerald-600/40'}`}>Materi</NavLink>
          <a href="#" className="px-3 py-2 rounded-md text-sm font-medium text-emerald-100/80 hover:bg-emerald-600/30">Kontak</a>
        </div>

        {/* mobile */}
        <div className="md:hidden">
          <button onClick={()=>setOpen(v=>!v)} aria-expanded={open} aria-controls="mobile-menu" className="p-2 rounded-md bg-emerald-700/20 text-emerald-100">
            <span className="sr-only">Open menu</span>
            {open ? 'âœ•' : 'â˜°'}
          </button>
        </div>
      </div>

      {open && (
        <div id="mobile-menu" className="md:hidden bg-emerald-900/40 border-t border-emerald-800/20">
          <div className="px-4 py-3 flex flex-col gap-2">
            <NavLink to="/" onClick={()=>setOpen(false)} className={({isActive})=> `px-3 py-2 rounded-md text-sm font-medium ${isActive? 'bg-emerald-600/80 text-white':'text-emerald-100/90 hover:bg-emerald-600/40'}`} end>Profil</NavLink>
            <NavLink to="/materi" onClick={()=>setOpen(false)} className={({isActive})=> `px-3 py-2 rounded-md text-sm font-medium ${isActive? 'bg-emerald-600/80 text-white':'text-emerald-100/90 hover:bg-emerald-600/40'}`}>Materi</NavLink>
            <a href="#" className="px-3 py-2 rounded-md text-sm font-medium text-emerald-100/80 hover:bg-emerald-600/30">Kontak</a>
          </div>
        </div>
      )}
    </nav>
  );
}

function ProfilePage() {
  return (
    <main className="max-w-4xl mx-auto bg-emerald-900/10 rounded-2xl border border-emerald-500/10 p-6 shadow-xl">
      <header className="text-center">
        <h1 className="text-3xl md:text-4xl font-extrabold text-emerald-100 drop-shadow-md">Profil â€” Irene Cicilia Simatupang</h1>
        <p className="mt-2 text-emerald-200/90">Pengembangan akademik, penelitian, hortikultura, inovasi pertanian modern.</p>
      </header>

      <section className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6 items-start">
        <div className="col-span-1 flex justify-center">
          <div className="w-56 rounded-lg overflow-hidden shadow-lg border border-white/20">
            <img src="/images/profile.jpg" alt="Irene Cicilia Simatupang - Foto Profil" className="w-full h-full object-cover" />
          </div>
        </div>
        <div className="md:col-span-2 text-emerald-50">
          <h2 className="text-xl font-semibold">Identitas Singkat</h2>
          <ul className="mt-3 space-y-2 text-sm text-emerald-100/90">
            <li><strong>Nama:</strong> Irene Cicilia Simatupang</li>
            <li><strong>NIM:</strong> 250311080032</li>
            <li><strong>Fakultas / Prodi:</strong> Pertanian / Agroteknologi</li>
            <li><strong>TTL:</strong> Jayapura, 2 Juni 2006</li>
            <li><strong>Alamat:</strong> Kleak, Malalayang, Manado, Sulut</li>
            <li><strong>Email:</strong> <a href="mailto:sisiliasimatupang8@gmail.com" className="underline">sisiliasimatupang8@gmail.com</a></li>
          </ul>

          <div className="mt-6">
            <h3 className="font-semibold">Tentang Saya</h3>
            <p className="mt-2 text-emerald-200/90">Berfokus pada pengembangan keterampilan akademik dan penelitian, serta memiliki ketertarikan pada dunia hortikultura dan inovasi pertanian modern.</p>
          </div>

          <div className="mt-6 flex gap-3">
            <Link to="/materi" className="inline-block px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium">Lihat Materi Hama & Penyakit</Link>
            <a href="#" className="inline-block px-4 py-2 rounded-lg border border-emerald-400 text-emerald-100">Download CV</a>
          </div>
        </div>
      </section>

      <section className="mt-8">
        <h3 className="text-lg font-semibold text-emerald-100">Gallery â€” Kegiatan & Dokumentasi</h3>
        <Gallery images={SAMPLE_GALLERY} />
      </section>
    </main>
  );
}

function MateriPage() {
  // We'll implement an accessible accordion controlled by React state
  const panels = [
    { id: 'p1', title: 'Contoh Hama & Penyakit', content: ContohContent() },
    { id: 'p2', title: 'Hama Tanaman', content: HamaContent() },
    { id: 'p3', title: 'Penyakit Tanaman', content: PenyakitContent() },
    { id: 'p4', title: 'Daftar Hama & Penyakit', content: DaftarContent() },
    { id: 'p5', title: 'Penyebaran Hama (Ringkasan 2025)', content: PenyebaranContent() },
  ];
  return (
    <main className="max-w-4xl mx-auto bg-emerald-900/10 rounded-2xl border border-emerald-500/10 p-6 shadow-xl">
      <header>
        <h1 className="text-2xl font-bold text-emerald-100">Materi: Hama & Penyakit Tanaman</h1>
        <p className="text-emerald-200/90 mt-1">Ringkasan materi edukasi dan tindakan pengendalian terpadu.</p>
      </header>

      <section className="mt-6">
        <Accordion panels={panels} />
      </section>
    </main>
  );
}

function NotFound(){
  return (
    <div className="max-w-2xl mx-auto text-center py-24 text-emerald-100">
      <h2 className="text-3xl font-bold">404 â€” Halaman Tidak Ditemukan</h2>
      <p className="mt-3">Kembali ke <Link to="/" className="underline">Beranda</Link>.</p>
    </div>
  );
}

/* -------------------- Gallery -------------------- */
function Gallery({ images = [] }){
  const [active, setActive] = useState(null);
  return (
    <div>
      <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
        {images.map((src, i)=> (
          <button key={i} onClick={()=>setActive(i)} className="overflow-hidden rounded-lg relative group">
            <img src={src} alt={`gallery-${i}`} className="w-full h-40 object-cover transform group-hover:scale-105 transition-transform duration-300" />
            <span className="absolute bottom-2 left-2 text-xs bg-black/40 text-white px-2 py-1 rounded">Foto {i+1}</span>
          </button>
        ))}
      </div>

      {/* lightbox modal */}
      {active !== null && (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4">
          <div className="max-w-3xl w-full">
            <div className="bg-white rounded-lg overflow-hidden">
              <div className="relative">
                <img src={images[active]} alt={`active-${active}`} className="w-full h-96 object-contain bg-black" />
                <button onClick={()=>setActive(null)} className="absolute top-3 right-3 bg-black/60 text-white px-3 py-1 rounded">Tutup</button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

/* -------------------- Accordion -------------------- */
function Accordion({ panels = [] }){
  const [openId, setOpenId] = useState(panels[0]?.id || null);
  function toggle(id){ setOpenId(prev => prev === id ? null : id); }

  return (
    <div className="space-y-3">
      {panels.map(({id,title,content})=> (
        <div key={id} className="bg-white/95 rounded-lg shadow-sm overflow-hidden">
          <button aria-expanded={openId===id} aria-controls={`${id}-panel`} onClick={()=>toggle(id)} className="w-full flex items-center justify-between px-4 py-3 text-left hover:bg-emerald-50/50">
            <span className="font-semibold text-emerald-900">{title}</span>
            <span className="text-emerald-700">{openId===id? 'â–¾':'â–¸'}</span>
          </button>
          <div id={`${id}-panel`} role="region" style={{display: openId===id ? 'block' : 'none'}} className="px-4 py-3 text-emerald-900">
            <div>{content}</div>
          </div>
        </div>
      ))}
    </div>
  );
}

/* -------------------- Content blocks -------------------- */
function ContohContent(){
  return (
    <div>
      <p><strong>Hama</strong> â€” organisme pengganggu seperti serangga, tikus, atau hewan lain yang merusak tanaman secara fisik.</p>
      <ul className="mt-2 list-disc pl-5">
        <li><strong>Wereng Batang Coklat (WBC):</strong> Mengisap cairan batang padi â€” menyebabkan puso.</li>
        <li><strong>Ulat Grayak:</strong> Memakan daun secara masif.</li>
        <li><strong>Lalat Buah:</strong> Larva berkembang di buah menyebabkan busuk.</li>
      </ul>

      <p className="mt-3"><strong>Penyakit</strong> â€” disebabkan patogen (jamur, bakteri, virus) yang menyebabkan bercak, layu, busuk, dll.</p>
    </div>
  );
}

function HamaContent(){
  return (
    <div>
      <p>Hama umum pada hortikultura: Thrips, Ulat Grayak, Lalat Buah, Kutu Daun (Aphids).</p>
      <p className="mt-2">Tindakan pengendalian: monitoring, sanitasi, pengendalian hayati, insektisida selektif bila perlu.</p>
    </div>
  );
}

function PenyakitContent(){
  return (
    <div>
      <ul className="list-disc pl-5">
        <li>Blast (Leher Padi) â€” jamur; malai mudah patah.</li>
        <li>Busuk Buah (Antraknosa) â€” bercak cekung & gelap.</li>
        <li>Layu Bakteri & Virus â€” gejala layu & kerdil.</li>
      </ul>
    </div>
  );
}

function DaftarContent(){
  return (
    <div>
      <ol className="list-decimal pl-5">
        <li>Wereng Batang Coklat</li>
        <li>Tungro pada Padi</li>
        <li>Penggerek Buah Kopi</li>
        <li>Root-Knot Nematode</li>
      </ol>
    </div>
  );
}

function PenyebaranContent(){
  return (
    <div>
      <p>Ringkasan Periode Januariâ€“Maret 2025: Thrips, Lalat Buah, Ulat Grayak tercatat menyerang beberapa daerah hortikultura. Dampak kehilangan hasil 15â€“50% pada area terinfeksi.</p>
      <p className="mt-2">Rekomendasi: praktik GAP, pengendalian terpadu Hama (PHT), dan pelaporan cepat ke dinas pertanian setempat.</p>
    </div>
  );
}

export default App;
